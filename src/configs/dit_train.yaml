defaults:
  - _self_

experiment:
  name: "my_experiment"
  seed: 10
  save_dir: "save/${experiment.name}"
  overwrite: false
  train_platform_type: "NoPlatform"

model:
  arch: trans_enc
  target: dit 
  latent_dim: 512
  n_heads: 8
  n_layers: 12
  dropout: 0.1
  cond_mode: "no_cond"
  multi_target_cond: false 
  cond_mask_prob: 0.1
  emb_trans_dec: false
  text_encoder_type: clip
  pos_embed_max_len: 5000
  mask_frames: false
  lambda_target_loc: 0.0
  lambda_rcxyz: 0.0 
  lambda_vel: 0.0
  lambda_fc: 0.0

diffusion:
  steps: 1000
  noise_schedule: "cosine"
  beta_start: 0.0001
  beta_end: 0.02
  sigma_small: true

data:
  dataset: "realsense-mmb-walk"
  batch_size: 64
  num_frames: 60       
  context_len: 10      
  max_seq_len: 196     
  parts: ["body", "left", "right"] 
  json_dir: "/home/mb230/projects/human-modeling-3d/data/realsense-mmb-walk/processed"
  target_joint_names: []
  pred_len: 20      
  num_workers: 0 
  pkl_path: null

training:
  lr: 2e-4
  device: 0
  log_interval: 100
  save_interval: 5000
  wandb_project: "motion_diffusion_transformer"
  num_steps: 600000
  weight_decay: 0.0
  lr_anneal_steps: 0
  resume_checkpoint: ""
  use_ema: true
  adam_beta2: 0.999
  avg_model_beta: 0.9999
  unconstrained: true
  start_from_ckpt: true

evaluation:
  model_path: ""  # Required: Path to model####.pt file to be evaluated
  eval_mode: "wo_mm"  # Choices: wo_mm, mm_short, debug, full
  autoregressive: false
  autoregressive_include_prefix: false
  autoregressive_init: "data"  # Choices: data, isaac
  guidance_param: 2.5
  eval_interval: 1000
  num_eval_samples: 16
  eval_during_training: true
  eval_rep_times: 3
  num_samples: 1000  
  num_seeds: 20    

sampling:
  checkpoint_path: "checkpoints/latest.pt"
  output_dir: "generated_samples"
  num_samples: 5
  fps: 30
  save_viz: true
  gen_during_training: true
  gen_num_samples: 5
  gen_num_repetitions: 1
  guidance_param: 1.0
  model_path: null
  num_repetitions: 3
  autoregressive: false
  autoregressive_include_prefix: false
  autoregressive_init: "data"
  # New parameters from the script
  text_prompt: ""
  input_text: ""
  action_name: ""
  action_file: ""
  dynamic_text_path: ""
  motion_length: 6.0  # in seconds, used to calculate n_frames