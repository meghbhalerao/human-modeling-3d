# Main configuration for SMPL/MANO pose extraction

# Input/Output paths
bag_file: null  # Path to input .bag file (required)
output_path: null  # Output JSON path (default: <bag_file>_smpl.json)

# MediaPipe model settings
models:
  path: "../../checkpoints/mediapipe_models"  # Directory containing MediaPipe models
  pose_model: "pose_landmarker_heavy.task"
  hand_model: "hand_landmarker.task"

# Detection confidence thresholds
detection:
  pose:
    min_detection_confidence: 0.3
    min_presence_confidence: 0.3
    min_tracking_confidence: 0.3
  hand:
    min_detection_confidence: 0.3
    min_presence_confidence: 0.3
    min_tracking_confidence: 0.3
    num_hands: 2

# Processing options
processing:
  visualize: true  # Show visualization window during processing
  real_time: false  # Process at real-time speed (false = as fast as possible)
  frame_skip: 1  # Process every Nth frame (1 = all frames)
  max_frames: null  # Maximum number of frames to process (null = all)

# Output options
output:
  save_positions: true  # Save 3D positions along with rotations
  save_metadata: true  # Include metadata in output
  pretty_print: true  # Format JSON with indentation
  
# Reference pose settings
reference:
  use_first_frame: true  # Use first detected frame as reference pose
  custom_reference: null  # Path to custom reference pose JSON (overrides use_first_frame)

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  print_progress_every: 100  # Print progress every N frames
  save_log: false  # Save log to file
  log_path: "extraction.log"

# Defaults
defaults:
  - _self_
  - override hydra/hydra_logging: disabled  # Disable Hydra's own logging
  - override hydra/job_logging: disabled

# Hydra settings
hydra:
  run:
    dir: outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
  sweep:
    dir: multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num}
